<!-- index.html -->  
<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>柏林互动科技有限公司</title>  
    <style>  
        #user_text_input {  
            width: 400px; /* 调整输入框的宽度 */  
        }  
        #submit_button {  
            display: block; /* 将按钮设置为块级元素，这样它会出现在下一行 */  
            margin-top: 10px; /* 添加一些上边距，使按钮与输入框之间有间距 */  
        }  
    </style>
</head>  
<body>  
    <h1>First Seed</h1>  
    <p>当前执行的指令: <span id="command_display"></span></p>  
  
    <h2>游戏信息</h2>  
    <ul id="messages_list">  
        <!-- AJAX请求后更新消息 -->  
    </ul>  
  
    <form id="submit_form">  
        <label for="user_text_input">请输入指令:</label>  
        <input type="text" id="user_text_input" name="text_input">  
        <button type="button" id="submit_button" onclick="sendCommand()">发送指令</button>  
    </form>  
    <script src="/static/js/jquery.min.js"></script>  
    <script>  
        function sendCommand() {  
            var userInput = document.getElementById("user_text_input").value;  
            document.getElementById("submit_button").style.display = 'none'; // 隐藏提交按钮  
  
            $.ajax({  
                url: '/submit',  
                type: 'POST',  
                contentType: 'application/json',  
                data: JSON.stringify({ text_input: userInput }),  
                success: function(response) {  
                    document.getElementById("command_display").textContent = userInput; // 显示指令  
                    updateMessages(response.messages); // 假设返回的数据中有一个messages数组  
                },  
                error: function(xhr, status, error) {  
                    console.error("Error: " + error);  
                },  
                complete: function() {  
                    document.getElementById("submit_button").style.display = 'block'; // 显示提交按钮  
                }  
            });  
        }  
  
        function updateMessages(messages) {  
            var messagesList = document.getElementById("messages_list");  
            messagesList.innerHTML = ''; // 清空当前消息  
            messages.forEach(function(message) {  
                var li = document.createElement("li");  
                li.textContent = message.who + " => " + message.what;  
                messagesList.appendChild(li);  
            });  
        }  
    </script>  

    <h2>可用指令</h2>
    <p>
        <br># 启动游戏</br>
        <br>/start</br>
        <br># 登陆游戏</br>
        <br>/login</br>
        <br># 攻击目标NPC, 名字为Name?</br>
        <br>/attack ‘Name?’</br>
        <br># 离开当前场景，去往Name?的场景</br>
        <br>/leave ‘Name?’</br>
        <br># 在当前场景内广播内容。场景内所有NPC都能听见</br>
        <br>/broadcast ‘说的内容’</br>
        <br># 对当前场景内的目标说话</br>
        <br>/speak ‘@对谁>说话内容’</br>
        <br># 对当前场景内的目标低语</br>
        <br>/whisper ‘@对谁>说话内容’</br>
        <br># 在当前场景内搜索叫‘Name?’的道具</br>
        <br>/search ‘Name?’</br>
        <br># 在不知道去往哪里的情况下，‘跳出’当前场景，如果当前场景没有连接场景则会失败。</br>
        <br>/prisonbreak</br>
        <br># 感知当前场景内有哪些人？事？道具？</br>
        <br>/perception</br>
        <br># 盗取对当前场景内的目标的道具</br>
        <br>/steal ‘@对谁>盗取的道具名字’</br>
        <br># 将我身上的道具交给目标</br>
        <br>/trade ‘@对谁>我的道具的名字’</br>
        <br># 查看我身上有哪些道具？</br>
        <br>/checkstatus</br>
        <br># 对谁使用某个道具</br>
        <br>/useprop @谁>xx</br>
    </p>
</body>  
</html>  
